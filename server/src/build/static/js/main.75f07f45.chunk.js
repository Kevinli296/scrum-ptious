(this["webpackJsonpscrum-ptious"]=this["webpackJsonpscrum-ptious"]||[]).push([[0],{182:function(e,t,s){},183:function(e,t,s){},279:function(e,t,s){},362:function(e,t,s){},384:function(e,t,s){},420:function(e,t,s){"use strict";s.r(t);var a=s(1),n=s(0),r=s(14),i=s.n(r),c=(s(182),s(8)),o=(s(183),s(42)),d=s(34);function l(e,t){var s,a=0,n=Object(d.a)(t);try{for(n.s();!(s=n.n()).done;){s.value.status===e&&(a+=1)}}catch(r){n.e(r)}finally{n.f()}return a}function u(e){var t,s=0,a=Object(d.a)(e);try{for(a.s();!(t=a.n()).done;){!0===t.value.is_late&&(s+=1)}}catch(n){a.e(n)}finally{a.f()}return s}function j(e){var t=l(0,e.teamTasks),s=l(1,e.teamTasks),n=l(2,e.teamTasks),r=l(3,e.teamTasks),i=u(e.teamTasks);return Object(a.jsx)("div",{className:"project-progress",children:Object(a.jsx)(o.Doughnut,{data:{labels:["Assigned","In-progress","In-review","Late","Complete"],datasets:[{label:"# of tasks",data:[t,s,n,i,r],backgroundColor:["rgba(28, 20, 255, 0.8)","rgba(255, 247, 20, 0.8)","rgba(232, 86, 2, 0.8)","rgba(255, 20, 20, 0.8)","rgba(33, 232, 2, 0.8)"]}]},height:400,width:600,options:{maintainAspectRatio:!1,title:{display:!0,text:"Project Progress",fontSize:25},legend:{display:!0,position:"right"}}})})}function b(e){var t=l(0,e.independentTasks),s=l(1,e.independentTasks),n=l(2,e.independentTasks),r=l(3,e.independentTasks),i=u(e.independentTasks);return Object(a.jsx)("div",{className:"independent-progress",children:Object(a.jsx)(o.Bar,{data:{labels:["Assigned","In-progress","In-review","Late","Complete"],datasets:[{label:"# of tasks",data:[t,s,n,i,r],backgroundColor:["rgba(28, 20, 255, 0.8)","rgba(255, 247, 20, 0.8)","rgba(232, 86, 2, 0.8)","rgba(255, 20, 20, 0.8)","rgba(33, 232, 2, 0.8)"]}]},height:400,width:600,options:{maintainAspectRatio:!1,title:{display:!0,text:"Your Progress",fontSize:25},legend:{display:!0,position:"right"},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})})}var m=s(46);function f(e){return Object(a.jsx)("div",{className:"employee-progress",children:Object(a.jsx)(o.Bar,{data:{labels:["Assigned","In-progress","In-review","Late","Complete"],datasets:[{label:"# of tasks",data:[e.assigned,e.inProgress,e.inReview,e.late,e.complete],backgroundColor:["rgba(28, 20, 255, 0.8)","rgba(255, 247, 20, 0.8)","rgba(232, 86, 2, 0.8)","rgba(255, 20, 20, 0.8)","rgba(33, 232, 2, 0.8)"]}]},height:400,width:600,options:{maintainAspectRatio:!1,title:{display:!0,text:e.name,fontSize:25},legend:{display:!0,position:"right"},scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})})}function O(e){var t=Object(n.useState)(0),s=Object(c.a)(t,2),r=(s[0],s[1]),i=e.teamUsers.filter((function(e){return 1!==e.role})).map((function(t){var s=function(e,t,s){var a,n={assigned:0,inProgress:0,inReview:0,late:0,complete:0},r=Object(d.a)(e);try{for(r.s();!(a=r.n()).done;){var i=a.value;i.projecttask_id===t&&i.employee_id===s&&(0===i.status?n.assigned+=1:1===i.status?n.inProgress+=1:2===i.status?n.inReview+=1:3===i.status&&(n.complete+=1),!0===i.is_late&&(n.late+=1))}}catch(c){r.e(c)}finally{r.f()}return n}(e.teamTasks,t.team_id,t.id);return Object(a.jsx)(m.c,{children:Object(a.jsx)(f,{id:t.id,name:t.name,assigned:s.assigned,inProgress:s.inProgress,inReview:s.inReview,late:s.late,complete:s.complete},t.id)})}));return Object(a.jsxs)(m.d,{defaultIndex:0,onSelect:function(e){return r(e)},children:[Object(a.jsx)(m.b,{children:e.teamUsers.filter((function(e){return 1!==e.role})).map((function(e){return Object(a.jsx)(m.a,{children:e.name})}))}),i]})}s(279);function h(e){var t=e.tasks,s=e.teamTasks,n=e.teamUsers,r=e.role;return Object(a.jsxs)("div",{className:"dashboard",children:[Object(a.jsx)("div",{className:"dashboard-top",children:Object(a.jsx)(j,{teamTasks:s})}),Object(a.jsxs)("div",{className:"dashboard-bottom",children:[1===r&&Object(a.jsx)(O,{independentTasks:t,teamTasks:s,teamUsers:n}),2===r&&Object(a.jsx)(b,{independentTasks:t})]})]})}var g=s(6),x=s(9),p=s.n(x),v=s(15),k=s.n(v),T=(s(68),s(16)),_=s(427),I=s(428),N=s(73),y=s.n(N);function w(e){switch(e){case 0:return{status:"Assigned",type:"info"};case 1:return{status:"In Progress",type:"primary"};case 2:return{status:"In Review",type:"warning"};case 3:return{status:"Completed",type:"success"}}}function M(e){var t=e.teamUsers,s=e.taskItem,r=e.show,i=e.handleClose,o=e.editTaskItem,d=e.deleteTaskItem,l=(e.error,e.setError,s.employee_id),u=s.title,j=s.description,b=s.due_date,m=s.status,f=s.is_late,O=Object(n.useState)(!1),h=Object(c.a)(O,2),x=h[0],p=h[1],v=Object(n.useState)(s),N=Object(c.a)(v,2),M=N[0],E=N[1],S=w(m);var D=t.filter((function(e){return e.id!==l&&1!==e.role})),U=function(e){return t.find((function(t){return t.id===e})).name};function C(){if(""!==M.title){if(""===M.description)return T.NotificationManager.warning("Description must be valid","Error"),void document.getElementById("edit-task-description").focus();if(""===M.employee_id)return T.NotificationManager.warning("Employee assigned must be valid","Error"),void document.getElementById("edit-task-assign").focus();if(M.due_date<new Date)return T.NotificationManager.warning("Due date cannot be in the past","Error"),void document.getElementById("edit-task-date").focus();o(M),p(!1),i()}else T.NotificationManager.warning("Title must be valid","Error")}return Object(a.jsxs)(_.a,{show:r,onHide:i,children:[Object(a.jsx)(_.a.Header,{closeButton:!0,children:Object(a.jsxs)(_.a.Title,{children:[x?M.title:u,3!==m&&Object(a.jsx)(I.a,{onClick:function(){p(!x)},variant:"warning",children:x?Object(a.jsx)(a.Fragment,{children:"Cancel"}):Object(a.jsx)(a.Fragment,{children:"Edit"})})]})}),Object(a.jsxs)(_.a.Body,{children:[!x&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:j}),Object(a.jsxs)("p",{children:["Assigned to: ",U(l)]}),Object(a.jsx)("label",{for:"viewMode-due_date",children:"Due on: "}),Object(a.jsx)(k.a,{name:"viewMode-due_date",local:!0,format:"Do MMM YYYY h:mm A",children:b})]}),x&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("label",{for:"newTitle",children:"Title: "}),Object(a.jsx)("input",{autofocus:!0,className:"form-control edit-task-title",value:M.title,onChange:function(e){return E((function(t){return Object(g.a)(Object(g.a)({},t),{},{title:e.target.value})}))}}),Object(a.jsx)("label",{for:"newDescription",children:"Description: "}),Object(a.jsx)("textarea",{id:"edit-task-description",value:M.description,onChange:function(e){return E((function(t){return Object(g.a)(Object(g.a)({},t),{},{description:e.target.value})}))},type:"text",className:"form-control",name:"newDescription"}),Object(a.jsx)("label",{for:"assigned",children:"Re-assign to:"}),Object(a.jsxs)("select",{id:"edit-task-assign",name:"assigned",className:"form-control",onChange:function(e){return E((function(t){return Object(g.a)(Object(g.a)({},t),{},{employee_id:e.target.value})}))},children:[Object(a.jsx)("option",{selected:!0,value:l,children:U(l)}),D.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.name})}))]}),Object(a.jsx)("label",{for:"due_date",children:"Due date:"}),Object(a.jsx)(y.a,{id:"edit-task-date",className:"form-control",locale:"en-US",selected:new Date(M.due_date),showTimeInput:!0,onChange:function(e){return function(e){var t=new Date(e).toISOString();E((function(e){return Object(g.a)(Object(g.a)({},e),{},{due_date:t})}))}(e)},dateFormat:"MMMM d, yyyy h:mm aa"})]})]}),Object(a.jsxs)(_.a.Footer,{children:[3!==m&&Object(a.jsx)(I.a,{variant:"danger",onClick:function(){return console.log(s),d(s),void i()},children:"Delete"}),x&&Object(a.jsx)(I.a,{confirm:!0,variant:"success",onClick:function(){return C()},children:"Save"}),!x&&3===m&&Object(a.jsx)("span",{className:"badge badge-".concat(S.type),children:S.status}),3===m&&f&&Object(a.jsx)("span",{className:"badge badge-danger",children:"Late"})]})]})}var E=s(47);function S(e){var t=function(e,t){var s=Object(E.a)(t);return s.reverse().filter((function(t){return t.task_id===e&&"pending"!==t.status}))}(e.taskId,e.feedbacks).map((function(e){return Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:e.feedback_string}),Object(a.jsx)("label",{for:"viewMode-due_date",children:"Submitted on: "}),Object(a.jsx)(k.a,{name:"viewMode-due_date",local:!0,format:"Do MMM YYYY h:mm A",children:e.submission_date}),Object(a.jsx)("p",{children:e.status})]},e.id)}));return Object(a.jsx)("div",{children:t})}function D(e,t){return e.find((function(e){return e.id===t})).name}function U(e){var t=e.show,s=e.handleClose,n=e.taskItem,r=e.teamUsers,i=e.submissions,c=e.submitTaskItem,o=n.id,d=n.employee_id,l=n.title,u=n.description,j=n.due_date,b=n.status,m=n.is_late,f=w(b);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(_.a,{show:t,onHide:s,children:[Object(a.jsx)(_.a.Header,{closeButton:!0,children:Object(a.jsx)(_.a.Title,{children:l})}),Object(a.jsx)(_.a.Body,{children:u}),Object(a.jsxs)(_.a.Body,{children:[Object(a.jsxs)("p",{children:["Assigned to: ",D(r,d)]}),Object(a.jsx)("label",{for:"viewMode-due_date",children:"Due on: "}),Object(a.jsx)(k.a,{name:"viewMode-due_date",local:!0,format:"Do MMM YYYY h:mm A",children:j}),Object(a.jsx)(S,{taskId:o,feedbacks:i})]}),Object(a.jsxs)(_.a.Footer,{children:[(0===b||1===b)&&Object(a.jsx)(I.a,{confirm:!0,variant:"primary",onClick:function(){return s(),void c(n)},children:"Submit"}),Object(a.jsx)("span",{className:"badge badge-".concat(f.type),children:f.status}),m&&Object(a.jsx)("span",{className:"badge badge-danger",children:"LATE"})]})]})})}function C(e){var t=e.role,s=e.taskItem,r=e.submissions,i=e.editTaskItem,o=e.deleteTaskItem,d=e.submitTaskItem,l=e.teamUsers,u=e.error,j=e.setError,b=s.title,m=s.description,f=s.due_date,O=s.creation_date,h=s.status,g=s.is_late,x=Object(n.useState)(!1),v=Object(c.a)(x,2),_=v[0],I=v[1],N=p()("task__item",{"task__item--assigned":!1===g&&0===h,"task__item--in-progress":!1===g&&1===h,"task__item--in-review":!1===g&&2===h,"task__item--in-review-late":!0===g&&2===h,"task__item--complete":3===h}),y=function(){return I(!1)};return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(T.NotificationContainer,{}),Object(a.jsxs)("li",{className:N,onClick:function(e){return I(!0)},children:[Object(a.jsx)("h4",{children:b}),Object(a.jsx)("p",{children:m}),Object(a.jsx)("label",{for:"creation_date",children:"Assigned on:"}),Object(a.jsx)("br",{}),Object(a.jsx)(k.a,{format:"Do MMM YYYY h:mm A",children:O}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{for:"due_date",children:"Due on:"}),Object(a.jsx)("br",{}),Object(a.jsx)(k.a,{format:"Do MMM YYYY h:mm A",children:f}),Object(a.jsx)("br",{})]}),Object(a.jsxs)("form",{onSubmit:function(e){return e.preventDefault()},className:"form-group",children:[1===t&&Object(a.jsx)(M,{teamUsers:l,taskItem:s,show:_,handleClose:y,editTaskItem:i,deleteTaskItem:o,error:u,setError:j}),2===t&&Object(a.jsx)(U,{show:_,taskItem:s,teamUsers:l,submissions:r,handleClose:y,submitTaskItem:d})]})]})}var Y=s(48);function A(e){var t=e.role,s=e.tasks,r=e.submissions,i=e.editTaskItem,o=e.deleteTaskItem,l=e.submitTaskItem,u=e.teamUsers,j=e.error,b=e.setError,m=e.moveTask,f=(e.setTasks,Object(n.useState)({})),O=Object(c.a)(f,2),h=O[0],x=O[1],p=Object(n.useState)(!1),v=Object(c.a)(p,2),k=v[0],T=v[1];Object(n.useEffect)((function(){var e=function(e){var t,s={assigned:[],inProgress:[],completed:[]},a=Object(d.a)(e);try{for(a.s();!(t=a.n()).done;){var n=t.value;switch(n.status){case 1:case 2:s.inProgress.push(n);break;case 3:s.completed.push(n);break;default:s.assigned.push(n)}}}catch(r){a.e(r)}finally{a.f()}return s}(s);x(e)}),[s]);var _={};for(var I in h)_[I]=h[I].map((function(e,s){var n=3===e.status||2===e.status;return 3!==e.status?Object(a.jsx)(Y.b,{draggableId:""+e.id,index:s,isDragDisabled:n,children:function(s,n){return Object(a.jsx)("div",Object(g.a)(Object(g.a)(Object(g.a)({},s.draggableProps),s.dragHandleProps),{},{ref:s.innerRef,children:Object(a.jsx)(C,{taskItem:e,role:t,submissions:r,editTaskItem:i,deleteTaskItem:o,submitTaskItem:l,teamUsers:u,error:j,setError:b},e.id)}),e.id)}},e.id):Object(a.jsx)(C,{taskItem:e,role:t,submissions:r,editTaskItem:i,deleteTaskItem:o,submitTaskItem:l,teamUsers:u,error:j,setError:b},e.id)}));var N=_.assigned,y=_.inProgress,w=_.completed;return Object(a.jsxs)("div",{className:"task-progress",children:[Object(a.jsxs)(Y.a,{onDragEnd:function(e){T(!1);var a=e.destination,n=e.source,r=e.draggableId,i=(e.droppableId,function(e,t){return e.find((function(e){return e.id===t}))}(s,Number(r)));a&&(2===t&&"assigned"===n.droppableId&&"inProgress"===a.droppableId&&(console.log(i),m(i,1)),2===t&&"inProgress"===n.droppableId&&"assigned"===a.droppableId&&m(i,0),1===t&&"trash"===a.droppableId&&o(i))},onBeforeCapture:function(){T(!0)},children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Assigned"}),Object(a.jsx)(Y.c,{droppableId:"assigned",children:function(e,t){return Object(a.jsxs)("div",Object(g.a)(Object(g.a)({index:"1",ref:e.innerRef},e.droppableProps),{},{children:[N,e.placeholder]}),"assigned")}})]},"assigned"),Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"In-Progress"}),Object(a.jsx)(Y.c,{droppableId:"inProgress",children:function(e,t){return Object(a.jsxs)("div",Object(g.a)(Object(g.a)({index:"2",ref:e.innerRef},e.droppableProps),{},{children:[y,e.placeholder]}),"inProgress")}})]},"inProgress"),1===t&&Object(a.jsx)("div",{className:k?"trash--visible":"trash--hidden",children:Object(a.jsx)(Y.c,{droppableId:"trash",children:function(e,t){return Object(a.jsxs)("div",Object(g.a)(Object(g.a)({index:"3",ref:e.innerRef},e.droppableProps),{},{children:[Object(a.jsx)("h1",{children:"Delete"}),e.placeholder]}),"trash")}})},"trash")]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Completed"}),w]})]})}var P=s(107),B=s.n(P);function F(e){var t=e.member,s=e.selectTasksByUser,n=t.role,r=t.name,i=t.email,c=t.phone_number;return Object(a.jsxs)("li",{className:"team-progress",onClick:function(){return s(t)},children:[Object(a.jsx)("h4",{children:r}),Object(a.jsx)("h5",{children:i}),Object(a.jsx)("h5",{children:c}),Object(a.jsx)("h6",{children:{1:"Project Manager",2:"Employee"}[n]})]})}function R(e){var t=e.selectTasksByUser,s=e.teamUsers.map((function(e){return Object(a.jsx)("li",{className:"team-item",children:Object(a.jsx)(F,{member:e,selectTasksByUser:t},e.id)})}));return Object(a.jsxs)("div",{className:"team-list",children:[Object(a.jsx)("h1",{children:"My Team"}),Object(a.jsx)("ul",{children:s})]})}function L(e){return Object(a.jsx)("h1",{children:"Task Resources"})}function H(e,t){return t.filter((function(t){return t.employee_id===Number(e)}))}s(362);function z(e){var t=e.role,s=e.tasks,r=e.teamUsers,i=e.submissions,o=e.editTaskItem,d=e.deleteTaskItem,l=e.submitTaskItem,u=e.error,j=e.setError,b=e.moveTask,m=e.setTasks,f=Object(n.useState)(s),O=Object(c.a)(f,2),h=O[0],g=O[1];Object(n.useEffect)((function(){g(s)}),[s]);return Object(a.jsxs)("div",{className:"dashboard",children:[Object(a.jsx)("div",{className:"dashboard-top",children:Object(a.jsx)(A,{role:t,tasks:h,teamUsers:r,submissions:i,deleteTaskItem:d,editTaskItem:o,submitTaskItem:l,error:u,setError:j,moveTask:b,setTasks:m})}),Object(a.jsxs)("div",{className:"dashboard-bottom",children:[1===t&&Object(a.jsx)(R,{teamUsers:r,selectTasksByUser:function(e){if(1!==e.role){var t=H(e.id,s);g(t)}else g(s)}}),2===t&&Object(a.jsx)(L,{})]})]})}var G=s(108),J=s.n(G);function Z(e){var t=e.avatar,s=e.sender,n=e.message,r=e.time_locale;return Object(a.jsxs)("div",{className:"chat-item",children:[Object(a.jsx)("img",{className:"chat-avatar",alt:"Employee Avatar",src:t}),Object(a.jsxs)("div",{className:"chat-item-right",children:[Object(a.jsx)("div",{className:"chat-message-sender",children:s}),Object(a.jsx)("div",{className:"chat-message",children:n}),Object(a.jsx)("span",{className:"chat-message-time",children:r})]})]})}function K(e){var t=e.messages,s=e.chatInfo,r=e.getPrevMessages,i=Object(n.useState)(!1),o=Object(c.a)(i,2),d=o[0],l=o[1],u=Object(n.useState)(1),j=Object(c.a)(u,2),b=j[0],m=j[1],f=Object(n.useRef)(null),O=Object(n.useRef)(null),h=function(e){e[0].isIntersecting&&m((function(e){return e+1}))};Object(n.useEffect)((function(){var e=new IntersectionObserver(h,{root:null,rootMargin:"20px",threshold:1});f.current&&e.observe(f.current)}),[]),Object(n.useEffect)((function(){r()}),[b]),Object(n.useEffect)((function(){l(!0),setTimeout((function(){l(!1)}),2e3)}),[s]);var g=t.map((function(e,t){var s=e.sender,n=e.message,r=e.sender_id,i=e.time_iso,c=e.time_locale;return Object(a.jsx)(Z,{avatar:"https://randomuser.me/api/portraits/men/73.jpg",sender:s,message:n,time_locale:c},"".concat(r,": ").concat(i))}));return Object(a.jsxs)("div",{className:"chat-log",ref:O,children:[Object(a.jsx)("div",{className:"loading",ref:f}),g,d&&Object(a.jsx)("div",{className:"chat-log-bottom",children:Object(a.jsx)("span",{className:"clat=info",children:s})})]})}function q(e){var t=e.name,s=e.role,n=e.avatar,r=e.online,i=p()("chat-avatar","members-list-avatar",{"avatar-online":r}),c=p()("members-list-item",{"member-item-online":r});return Object(a.jsxs)("div",{className:c,children:[Object(a.jsx)("img",{src:n,alt:"User Avatar",className:i}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:t}),Object(a.jsx)("div",{children:s})]})]})}var Q=["Project Manager","Developer"];function V(e){var t=e.teamUsers,s=e.onlineUsers,n=t.map((function(e){var t=e.id,n=e.name,r=e.role;return Object(a.jsx)(q,{name:n,role:Q[r-1],avatar:"https://randomuser.me/api/portraits/men/73.jpg",online:s.includes(t)},t)}));return Object(a.jsx)("div",{className:"members-list",children:n})}function W(e){var t=e.sendMessage,s=Object(n.useState)(""),r=Object(c.a)(s,2),i=r[0],o=r[1];return Object(a.jsx)("div",{className:"input-box",children:Object(a.jsxs)("form",{autoComplete:"off",onSubmit:function(e){return function(e){e.preventDefault(),i&&(t(i),o(""))}(e)},children:[Object(a.jsx)("input",{name:"msg",type:"text",placeholder:"Your message",value:i,onChange:function(e){return o(e.target.value)}}),Object(a.jsx)("button",{type:"submit",children:"Send"})]})})}s(384);function X(e){var t=e.socket,s=e.userInfo,r=e.teamUsers,i=function(e,t){var s=t.id,a=t.name,r=t.team_id,i=Object(n.useState)([]),o=Object(c.a)(i,2),d=o[0],l=o[1],u=Object(n.useState)([]),j=Object(c.a)(u,2),b=j[0],m=j[1],f=Object(n.useState)(""),O=Object(c.a)(f,2),h=O[0],g=O[1];return Object(n.useEffect)((function(){B.a.get("".concat("http://localhost:8080/api/messages","/15")).then((function(e){return l(e.data)}))}),[]),Object(n.useEffect)((function(){return e.emit("joining msg",a,s),e.on("user joined",(function(e,t){m(e),g(t+" joined the chat")})),e.on("user left",(function(e,t){m(e),g(t+" left the chat")})),e.on("chat message",(function(e){l((function(t){return[].concat(Object(E.a)(t),[e])}))})),e.on("get previous messages",(function(e){l((function(t){return[].concat(Object(E.a)(e),Object(E.a)(t))})),console.log(e)})),e.on("message saved",(function(e){console.log("message saved: ",e)})),function(){e.off("user joined"),e.off("user left"),e.off("chat message"),e.off("get previous messages"),e.off("message saved"),e.emit("leaving msg",a,s)}}),[]),{messages:d,joinMessage:h,onlineUsers:b,getPrevMessages:function(){d[0]&&e.emit("get previous messages",d[0].time_iso,12)},sendMessage:function(t){var n,i=new Date,c={message:t,team_id:r,sender_id:s,sender:a,time_iso:i.toISOString(),time_locale:(n=i,n.toLocaleDateString("en-US",{day:"numeric",month:"short",year:"numeric"})+" at "+n.toLocaleTimeString(void 0,{hour:"numeric",minute:"2-digit"}))};e.emit("chat message",c)}}}(t,s),o=i.messages,d=i.joinMessage,l=i.onlineUsers,u=i.getPrevMessages,j=i.sendMessage;return Object(a.jsxs)("div",{className:"chat-container",children:[Object(a.jsx)("button",{onClick:function(){return u()},children:"Test Get Previous Messages"}),Object(a.jsxs)("div",{className:"chat-top",children:[Object(a.jsx)(J.a,{className:"chat-scroll",children:Object(a.jsx)(K,{messages:o,chatInfo:d,getPrevMessages:u})}),Object(a.jsx)(V,{teamUsers:r,onlineUsers:l})]}),Object(a.jsx)(W,{sendMessage:j})]})}function $(e,t){var s,a="",n=Object(d.a)(e);try{for(n.s();!(s=n.n()).done;){var r=s.value;r.id===t&&(a=r.name)}}catch(i){n.e(i)}finally{n.f()}return a}function ee(e){var t=e.teamUsers,s=e.selectedTask,r=e.show,i=e.setShow,o=e.giveFeedback,d=s.title,l=s.description,u=s.employee_id,j=s.creation_date,b=s.due_date,m=s.is_late,f=Object(n.useState)({message:""}),O=Object(c.a)(f,2),h=O[0],x=O[1],p=function(e){o(h.message,s,e),x((function(e){return Object(g.a)(Object(g.a)({},e),{},{message:""})})),i(!1)};return Object(a.jsx)("div",{className:"feedback-container",children:Object(a.jsxs)(_.a,{show:r,onHide:function(){i(!1)},children:[Object(a.jsx)(_.a.Header,{closeButton:!0,children:Object(a.jsx)(_.a.Title,{children:d})}),Object(a.jsxs)("form",{class:"form-group",onSubmit:function(e){return e.preventDefault()},children:[Object(a.jsxs)(_.a.Body,{children:[Object(a.jsx)("p",{children:l}),Object(a.jsxs)("p",{children:["Assigned to: ",$(t,u)]}),Object(a.jsxs)("p",{children:["On:",Object(a.jsx)(k.a,{format:"Do MMM YYYY h:mm A",children:j})]}),Object(a.jsxs)("p",{children:["Due on:",Object(a.jsx)(k.a,{format:"Do MMM YYYY h:mm A",children:b}),m&&Object(a.jsx)("span",{className:"badge badge-danger",children:"LATE"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{for:"feedback",children:"Feedback:"}),Object(a.jsx)("textarea",{name:"feedback",className:"form-control",value:h.message,onChange:function(e){return x((function(t){return Object(g.a)(Object(g.a)({},t),{},{message:e.target.value})}))}})]})]}),Object(a.jsxs)(_.a.Footer,{children:[Object(a.jsx)(I.a,{variant:"danger",onClick:function(e){return p(!1)},children:"Reject"}),Object(a.jsx)(I.a,{variant:"success",onClick:function(e){return p(!0)},children:"Accept"})]})]})]})})}function te(e){var t=e.title,s=e.name,n=e.description,r=e.is_late,i=e.is_viewed,c=e.taskData,o=e.setSelectedTask,d=e.setShow;return Object(a.jsxs)("li",{onClick:function(){return o(c),void d(!0)},children:[Object(a.jsx)("h4",{children:t}),Object(a.jsx)("h4",{children:s}),Object(a.jsx)("h4",{children:n}),Object(a.jsx)("h4",{children:r&&"LATE"}),Object(a.jsx)("h4",{children:i&&"Feedback Given"})]})}function se(e){var t=e.teamUsers,s=e.teamTasks,n=e.setSelectedTask,r=e.setShow,i=s.map((function(e){return 2===e.status&&Object(a.jsx)("li",{className:"task-in-progress",children:Object(a.jsx)(te,{title:e.title,description:e.description,name:$(t,e.employee_id),is_late:e.is_late,is_viewed:e.is_viewed,taskData:e,setSelectedTask:n,setShow:r},e.id)},e.id)}));return Object(a.jsx)("div",{className:"task-progress",children:Object(a.jsx)("ul",{children:i})})}function ae(e){var t=e.teamUsers,s=e.teamTasks,r=e.giveFeedback,i=Object(n.useState)({}),o=Object(c.a)(i,2),d=o[0],l=o[1],u=Object(n.useState)(!1),j=Object(c.a)(u,2),b=j[0],m=j[1];return Object(a.jsxs)("div",{className:"dashboard",children:[Object(a.jsx)("div",{className:"dashboard-top",children:Object(a.jsx)(se,{teamUsers:t,teamTasks:s,setSelectedTask:l,setShow:m})}),Object(a.jsx)("div",{className:"dashboard-bottom",children:Object(a.jsx)(ee,{teamUsers:t,selectedTask:d,show:b,setShow:m,giveFeedback:r})})]})}s(385);function ne(e){var t=p()("sidebar-list__item",{"sidebar-list__item--selected":e.selected});return Object(a.jsx)("li",{className:t,onClick:function(){return e.setMenu(e.name)},children:Object(a.jsx)("h2",{children:e.name})})}function re(e){var t=new Date;t.setDate(t.getDate()+7),t.setHours(17),t.setMinutes(0);var s=e.team,r=e.teamUsers,i=e.createTaskItem,o=(e.error,e.setError,Object(n.useState)({projecttask_id:s,title:"",description:"",employee_id:"",due_date:t})),d=Object(c.a)(o,2),l=d[0],u=d[1],j=Object(n.useState)(!1),b=Object(c.a)(j,2),m=b[0],f=b[1],O=r.filter((function(e){return 1!==e.role}));function h(){var e=l.title,t=l.description,s=l.employee_id,a=l.due_date;return""===e?(T.NotificationManager.warning("Title must be valid","Error"),void document.getElementById("new-task-title").focus()):""===t?(T.NotificationManager.warning("Description must be valid","Error"),void document.getElementById("new-task-description").focus()):""===s?(T.NotificationManager.warning("Employee assigned must be valid","Error"),void document.getElementById("new-task-assign").focus()):a<new Date?(T.NotificationManager.warning("Due date cannot be in the past","Error"),void document.getElementById("new-task-date").focus()):(i(l),u((function(e){return Object(g.a)(Object(g.a)({},e),{},{title:"",description:"",employee_id:""})})),void f(!1))}return Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{className:"new-task-btn",onClick:function(){return f(!0)},children:[Object(a.jsx)("i",{class:"fas fa-plus new-task-btn"})," New Task"]}),Object(a.jsx)(T.NotificationContainer,{}),Object(a.jsx)("form",{className:"form-group",onSubmit:function(e){return e.preventDefault()},children:Object(a.jsxs)(_.a,{show:m,onHide:function(){return f(!1)},onEntered:function(){return document.getElementById("new-task-title").focus()},children:[Object(a.jsx)(_.a.Header,{closeButton:!0,children:Object(a.jsx)(_.a.Title,{children:Object(a.jsx)("h3",{children:"New Task"})})}),Object(a.jsxs)(_.a.Body,{children:[Object(a.jsx)("label",{for:"title",children:"Title: "}),Object(a.jsx)("input",{id:"new-task-title",name:"title",className:"form-control",value:l.title,onChange:function(e){return u((function(t){return Object(g.a)(Object(g.a)({},t),{},{title:e.target.value})}))}}),Object(a.jsx)("label",{for:"description",children:"Description: "}),Object(a.jsx)("textarea",{id:"new-task-description",name:"description",className:"form-control",value:l.description,onChange:function(e){return u((function(t){return Object(g.a)(Object(g.a)({},t),{},{description:e.target.value})}))}}),Object(a.jsx)("label",{for:"assignTo",children:"Assign to: "}),Object(a.jsxs)("select",{class:"form-control",id:"new-task-assign",onChange:function(e){return u((function(t){return Object(g.a)(Object(g.a)({},t),{},{employee_id:Number(e.target.value)})}))},children:[Object(a.jsx)("option",{selected:!0,value:""}),O.map((function(e){return Object(a.jsx)("option",{value:e.id,children:e.name})}))]}),Object(a.jsx)("label",{for:"due-date",children:"Due on: "}),Object(a.jsx)(y.a,{id:"new-task-date",className:"form-control",selected:new Date(l.due_date),showTimeInput:!0,onChange:function(e){return u((function(t){return Object(g.a)(Object(g.a)({},t),{},{due_date:e})}))},dateFormat:"MMMM d, yyyy h:mm aa"})]}),Object(a.jsx)(_.a.Footer,{children:Object(a.jsx)(I.a,{variant:"primary",onClick:function(e){return h()},children:"Submit"})})]})})]})}function ie(e){var t=e.selectedMenu,s=e.userInfo,n=e.teamUsers,r=e.setMenu,i=e.createTaskItem,c=e.error,o=e.setError,d=["Dashboard","Tasks","Chat",1===s.role?"Submissions":""];return Object(a.jsxs)("ul",{children:[d.map((function(e,s){return Object(a.jsx)(ne,{name:e,selected:t===e,setMenu:r},s)})),1===s.role&&Object(a.jsx)("div",{children:Object(a.jsx)(re,{team:s.team_id,teamUsers:n,createTaskItem:i,error:c,setError:o})})]})}function ce(e){e.title,e.description;var t=e.due_date,s=e.creation_date,n=e.assignedTo,r=e.userInfo,i=e.teamUsers,c=e.is_late;return Object(a.jsxs)("li",{children:[Object(a.jsx)("h4",{children:e.title}),1===r.role&&Object(a.jsxs)("p",{children:["Assigned to: ",$(i,n)]}),Object(a.jsx)("label",{for:"creation_date",children:"On:"}),Object(a.jsx)(k.a,{name:"creation_date",format:"Do MMM YYYY h:mm A",children:s}),Object(a.jsx)("br",{}),Object(a.jsx)("label",{for:"due_date",children:"Due:"}),Object(a.jsx)(k.a,{name:"due_date",format:"Do MMM YYYY h:mm A",children:t}),c&&Object(a.jsx)("span",{className:"badge badge-danger",children:"LATE"})]})}function oe(e){var t=e.deadlines,s=e.userInfo,n=e.teamUsers,r=t.filter((function(e){return e.employee_id===s.id})).map((function(e){return Object(a.jsx)("li",{className:"deadlines-item",children:Object(a.jsx)(ce,{title:e.title,description:e.description,due_date:e.due_date,creation_date:e.creation_date,userInfo:s,assignedTo:e.employee_id,is_late:e.is_late,teamUsers:n},e.id)})})),i=t.map((function(e){return Object(a.jsx)("li",{className:"deadlines-item",children:Object(a.jsx)(ce,{title:e.title,description:e.description,due_date:e.due_date,creation_date:e.creation_date,userInfo:s,assignedTo:e.employee_id,is_late:e.is_late,teamUsers:n},e.id)})}));return Object(a.jsx)("div",{children:Object(a.jsx)("ul",{children:1===s.role?i:r})})}function de(e){var t=(new Date).getTime();return e.filter((function(e){return s=e.due_date,new Date(s).getTime()<t&&0===e.status||1===e.status;var s}))}var le={1:"Project Manager",2:"Employee"};function ue(e){var t=e.userInfo,s=e.tasks,n=e.teamUsers,r=de(s);return Object(a.jsx)("div",{className:"user-info",children:t&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("img",{src:t.avatar,className:"user-avatar"}),Object(a.jsxs)("h4",{children:[t.name," "]}),Object(a.jsx)("h5",{children:le[t.role]}),Object(a.jsx)("div",{className:"deadlines",children:Object(a.jsx)(oe,{deadlines:r,userInfo:t,teamUsers:n})})]})})}function je(e){var t=e.setLogin;return Object(a.jsxs)("form",{children:[Object(a.jsx)("h1",{children:"Enter your user ID: "}),Object(a.jsx)("input",{onChange:function(e){return t(e.target.value)}}),Object(a.jsx)("button",{onSubmit:function(e){return t(e.target.value)},children:"Submit"})]})}var be=s(174);s(415),s(416),s(417),s(418),s(419);var me="Dashboard";var fe=function(){var e=Object(n.useState)(me),t=Object(c.a)(e,2),s=t[0],r=t[1],i=Object(n.useState)(0),o=Object(c.a)(i,2),d=o[0],l=o[1],u=function(){var e=Object(n.useState)({}),t=Object(c.a)(e,2),s=t[0],a=t[1];return Object(n.useEffect)((function(){var e=Object(be.io)();return a(e),function(){e.close()}}),[]),{socket:s}}().socket,j=Object(n.useState)({title:"",message:""}),b=Object(c.a)(j,2),m=b[0],f=b[1],O=function(e,t,s){var a=Object(n.useState)({userInfo:{},role:0,userTasks:[],teamUsers:[],teamTasks:[],deadlines:[],submissions:[]}),r=Object(c.a)(a,2),i=r[0],o=r[1];return Object(n.useEffect)((function(){if(t)return e.emit("user logged in",t),e.on("login data",(function(e){var t=e.userTasks,s=e.userInfo,a=e.teamTasks,n=e.teamUsers,r=e.deadlines,i=e.submissions;o((function(e){return Object(g.a)(Object(g.a)({},e),{},{userTasks:t,userInfo:s,teamTasks:a,teamUsers:n,deadlines:r,submissions:i,role:s.role})}))})),e.on("error",(function(e,t){s((function(s){return Object(g.a)(Object(g.a)({},s),{},{title:t.title,message:e})}))})),function(){t||(e.off("login data"),e.off("error"))}}),[t]),{state:i,setTasks:function(e){var s=H(t,e);o((function(t){return Object(g.a)(Object(g.a)({},t),{},{teamTasks:e,userTasks:s})}))},setSubmissions:function(e){return o((function(t){return Object(g.a)(Object(g.a)({},t),{},{submissions:e})}))}}}(u,d,f),x=O.state,p=O.setTasks,v=O.setSubmissions,k=x.userTasks,_=x.userInfo,N=x.role,y=x.teamTasks,w=x.teamUsers,M=(x.deadlines,x.submissions),E=function(e,t,s){var a=Object(n.useState)({title:"",message:"",type:"",user:""}),r=Object(c.a)(a,2),i=r[0],o=r[1],d=Object(n.useState)({title:"",message:"",type:"",user:""}),l=Object(c.a)(d,2),u=l[0],j=l[1];return Object(n.useEffect)((function(){if(""!==i.message&&i.user===e.id){switch(i.type){case"info":s.info(i.message,i.title,5e3,(function(){t("Tasks")}));break;case"success":s.success(i.message,i.title);break;case"warning":s.warning(i.message,i.title,5e3,(function(){t("Tasks")}));break;case"error":s.error(i.message,i.title)}o((function(e){return Object(g.a)(Object(g.a)({},e),{},{title:"",message:"",type:"",user:""})}))}if(""!==u.message&&u.user===e.id){switch(console.log(u.type),u.type){case"info":s.info(u.message,u.title);break;case"success":s.success(u.message,u.title);break;case"warning":s.warning(u.message,u.title);break;case"error":s.error(u.message,u.title)}j((function(e){return Object(g.a)(Object(g.a)({},e),{},{title:"",message:"",type:"",user:""})}))}}),[i,u]),{userNotification:i,managerNotification:u,setUserNotification:o,setManagerNotification:j}}(_,r,T.NotificationManager),S=(E.userNotification,E.managerNotification,function(e,t,s,a,r,i,c,o){var d=2;return Object(n.useEffect)((function(){if(e)return t.on("tasks update",(function(e,t){a(e),i((function(e){return Object(g.a)(Object(g.a)({},e),{},{message:"Your tasks have updated",user:t,title:"Click to view",type:"warning"})}))})),t.on("tasks action saved",(function(t,s){switch(t){case"CREATE":c((function(t){return Object(g.a)(Object(g.a)({},t),{},{message:s.title,title:"Task Created",type:"success",user:Number(e)})}));break;case"EDIT":c((function(t){return Object(g.a)(Object(g.a)({},t),{},{message:s.title,title:"Task Updated",type:"success",user:Number(e)})}));break;case"DELETE":c((function(t){return Object(g.a)(Object(g.a)({},t),{},{message:s.title,title:"Task Deleted",type:"success",user:Number(e)})}));break;case"FEEDBACK":c((function(t){return Object(g.a)(Object(g.a)({},t),{},{message:"Submission has been updated",title:"Feedback Sent",type:"success",user:Number(e)})}))}})),t.on("submt/feedback",(function(e,t){1!==o.role&&i((function(e){return Object(g.a)(Object(g.a)({},e),{},{message:"You have new feedback",user:t,title:"Click to view",type:"info"})})),a(e.teamTasks),r(e.submissions)})),function(){t.off("tasks update"),t.off("tasks action saved"),t.off("submit/feedback")}}),[e]),{moveTask:function(e,s){t.emit("move task",e,s)},createTaskItem:function(e){t.emit("tasks update",e,"CREATE")},editTaskItem:function(e){t.emit("tasks update",e,"EDIT")},deleteTaskItem:function(e){t.emit("tasks update",e,"DELETE")},submitTaskItem:function(e){var s=Object(g.a)(Object(g.a)({},e),{},{status:d}),a={submission:{feedback_string:"",submission_date:(new Date).toISOString(),task_id:e.id},taskItem:s};t.emit("employee submit",a,1)},giveFeedback:function(e,a,n){var r=function(e,t){return e.find((function(e){return e.task_id===t&&"pending"===e.status}))}(s,a.id),i=Object(g.a)(Object(g.a)({},r),{},{feedback_string:e,status:n?"accepted":"rejected"}),c=Object(g.a)(Object(g.a)({},a),{},{status:n?3:1});t.emit("feedback",{feedback:i,taskItem:c},c.employee_id)}}}(d,u,M,p,v,E.setUserNotification,E.setManagerNotification,_)),D=S.moveTask,U=S.createTaskItem,C=S.editTaskItem,Y=S.deleteTaskItem,A=S.submitTaskItem,P=S.giveFeedback;return 0===d?Object(a.jsx)("section",{className:"main",children:0===d&&Object(a.jsx)(je,{setLogin:l})}):Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(T.NotificationContainer,{}),Object(a.jsxs)("section",{className:"sidebar",children:[Object(a.jsx)("img",{alt:"Scrum-ptious Logo",className:"sidebar-centered",src:"https://logoipsum.com/logo/logo-25.svg"}),Object(a.jsx)("nav",{className:"sidebar__menu",children:Object(a.jsx)(ie,{selectedMenu:s,userInfo:_,teamUsers:w,setMenu:r,createTaskItem:U,errorNotification:m,setErrorNotification:f})}),Object(a.jsx)(I.a,{variant:"outline-light",onClick:function(){return l(0)},children:"Log out"})]}),Object(a.jsxs)("section",{className:"main",children:[s===me&&Object(a.jsx)(h,{tasks:k,role:N,teamTasks:y,teamUsers:w}),"Tasks"===s&&Object(a.jsx)(z,{socket:u,role:N,tasks:1===N?y:k,teamUsers:w,submissions:M,deleteTaskItem:Y,editTaskItem:C,submitTaskItem:A,errorNotification:m,setErrorNotification:f,moveTask:D,setTasks:p}),"Chat"===s&&Object(a.jsx)(X,{socket:u,userInfo:_,teamUsers:w}),"Submissions"===s&&Object(a.jsx)(ae,{teamUsers:w,teamTasks:y,giveFeedback:P})]}),Object(a.jsx)("section",{className:"user__info",children:Object(a.jsx)(ue,{userInfo:_,tasks:y,teamUsers:w})})]})};i.a.render(Object(a.jsx)(fe,{}),document.getElementById("root"))}},[[420,1,2]]]);
//# sourceMappingURL=main.75f07f45.chunk.js.map